---
name: git-commit-helper
description: 智能生成 Git 提交信息工具。当用户需要提交代码变更时自动触发，支持：分析变更内容生成规范的 commit message，带有 emoji 前缀，提供多个选项供用户选择，支持单文件或多文件分别提交。
---

# Git Commit Helper

## 功能概述

帮助用户快速、规范地生成 Git 提交信息。

## 核心功能

- **智能分析**：自动检查 git status 和 diff，分析变更类型
- **emoji 支持**：根据变更类型自动匹配合适的 emoji 前缀
- **多选项**：生成多个候选 message，用户可选择或自定义
- **灵活提交**：支持单文件提交、多文件一起提交、分开提交等多种方式
- **中文描述**：所有 message 均使用中文，符合中文项目习惯

## 工作流程

1. **检查变更**：`git status` + `git diff` 分析当前变更
2. **识别类型**：根据文件路径和变更内容判断变更类型
3. **生成 emoji**：匹配对应的 emoji 前缀
4. **生成选项**：生成多个候选 commit message
5. **用户选择**：通过问题让用户选择或自定义
6. **执行提交**：执行 `git add` + `git commit`

## 变更类型与 emoji 对照表

| 变更类型 | emoji | 适用场景 |
|---------|-------|---------|
| 新功能 | ✨ | 添加新功能、新特性 |
| 修复 Bug | 🐛 | 修复 bug、错误 |
| 文档 | 📝 | 文档更新、注释 |
| 格式 | 💄 | 代码格式、风格 |
| 重构 | ♻️ | 代码重构、优化 |
| 测试 | ✅ | 添加测试、测试相关 |
| 性能 | ⚡️ | 性能优化 |
| 工具 | 🔧 | 工具、脚本、配置 |
| 资源 | 📦 | 资源、文件、依赖 |
| 删除 | 🗑️ | 删除文件、功能 |
| 合并 | 🔀 | 合并分支 |
| 回滚 | ⏪️ | 回滚变更 |
| 探索 | 🔍 | 初步尝试、探索性修改 |

## Commit Message 格式规范

```
<emoji> <类型>: <简要描述>

<中文详细说明>
- 变更点 1
- 变更点 2
```

### 示例

```
✨ 添加用户认证功能

新增用户登录、注册、登出功能
- 实现 JWT token 认证
- 添加密码加密存储
- 集成第三方登录
```

## 使用场景

**触发条件**：
- 用户说"帮我提交"
- 用户说"git commit"
- 用户说"生成 commit message"
- 用户提到需要提交代码变更

**适用情况**：
- 单个文件提交
- 多个文件一起提交
- 需要分开提交多个文件
- 不确定如何描述变更

## 使用示例

### 场景 1：简单提交

用户：「帮我提交这个修改」

系统自动：
1. 检查变更
2. 生成候选 message
3. 用户选择
4. 执行提交

### 场景 2：多文件分开提交

用户：「分开提交这些文件」

系统：
1. 识别多个文件变更
2. 依次处理每个文件
3. 每个文件单独生成 message
4. 分别执行 commit

### 场景 3：自定义 message

用户：「我想用这个 message」

系统：
1. 使用用户提供的 message
2. 执行 commit

## 注意事项

- 始终使用 `git status` 和 `git diff` 获取准确信息
- emoji 选择应准确反映变更本质
- message 应简洁明了，描述清楚变更内容
- 多文件提交时，确保每个 message 准确对应文件变更
- 保持一致性，相同类型的变更使用相同的 emoji

## 集成说明

此 skill 可与以下工具配合使用：

- **git 工具**：执行 git status、diff、add、commit
- **bash 工具**：执行 shell 命令
- **question 工具**：向用户展示选项并获取选择

## 最佳实践

1. **变更分析**：仔细分析每个文件的变更，确保类型判断准确
2. **message 质量**：生成的 message 应有实际意义，避免过于笼统
3. **用户选择**：提供合理的选项数量（通常 2-4 个）
4. **确认提交**：重大变更建议让用户确认后再执行
5. **错误处理**：commit 失败时给出明确提示
